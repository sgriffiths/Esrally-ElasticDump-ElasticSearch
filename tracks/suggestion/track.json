{
  "description": "Rally suggestion_a performance test",
  "indices": [
    {
      "name": "suggestion_a",
      "body": "index.json",
      "types": [
        "docs"
      ]
    }
  ],
  "corpora": [
    {
      "name": "suggestion-test-track",
      "documents": [
        {
          "source-file": "../data/suggestion_a.data.json",
          "document-count": 49210,
          "uncompressed-bytes": 4600199
        }
      ]
    }
  ],
  "challenges": [
    {
      "name": "index-and-query-suggestion",
      "default": true,
      "schedule": [
        {
          "operation": {
            "operation-type": "delete-index"
          }
        },
        {
          "operation": {
            "operation-type": "create-index"
          }
        },
        {
          "operation": {
            "operation-type": "cluster-health",
            "request-params": {
              "wait_for_status": "green"
            }
          }
        },
        {
          "operation": {
            "operation-type": "bulk",
            "bulk-size": 1000
          },
          "warmup-time-period": 60,
          "clients": 1
        },
        {
          "operation": {
            "operation-type": "force-merge"
          }
        },
        {
          "parallel": {
            "tasks": [
              {
                "operation": {
                  "name": "query-suggestion-partial-c*",
                  "operation-type": "search",
                  "body": {
                    "query": {
                      "bool": {
                        "must": [
                          {
                            "wildcard": {
                              "term.raw": "c*"
                            }
                          }
                        ],
                        "must_not": [],
                        "should": []
                      }
                    },
                    "from": 0,
                    "size": 10,
                    "sort": [],
                    "aggs": {}
                  }
                },
          "clients": {{ clients|default(5) }},
          "time-period": {{ duration|default(300) }},
          "target-throughput": {{ throughput|default(300) }},
          "warmup-time-period": 60
              },
              {
                "operation": {
                  "name": "query-suggestion-partial-p*",
                  "operation-type": "search",
                  "body": {
                    "query": {
                      "bool": {
                        "must": [
                          {
                            "wildcard": {
                              "term.raw": "p*"
                            }
                          }
                        ],
                        "must_not": [],
                        "should": []
                      }
                    },
                    "from": 0,
                    "size": 10,
                    "sort": [],
                    "aggs": {}
                  }
                },
          "clients": {{ clients|default(5) }},
          "time-period": {{ duration|default(300) }},
          "target-throughput": {{ throughput|default(300) }},
          "warmup-time-period": 60
              }
            ]
          }
        }
      ]
    }
  ]
}